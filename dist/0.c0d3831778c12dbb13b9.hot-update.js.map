{"version":3,"file":"0.c0d3831778c12dbb13b9.hot-update.js","sources":["webpack:///src/app.js?bd9c"],"sourcesContent":["/*global fb*/\n\nimport React, { PureComponent } from 'react';\nimport { PropTypes } from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport store from './store';\nimport Game from './game_main';\nimport state from './states/state';\nimport { connect } from 'react-redux';\nimport * as actions from './actions/actionIndex';\nimport Registration from './registration';\nimport axios from 'axios';\n\nconst SERVER = 'http://localhost:8080/';\n\nconst startGame = () => {\n    $('#signinScreen').css('display', 'none');\n    $.ajax({\n        url: SERVER + 'highestScore',\n        type: 'GET',\n        success: data => {\n            state.gameHighestScore = data.result[0].highestScore;\n            //$('body').data('gameHighestScore', gameHighestScore);\n            const game = new Game();\n        },\n        error: e => {\n            console.log(e);\n        },\n    });\n};\n\nconst { object, func } = PropTypes;\n\nexport default class App extends PureComponent {\n    /*\n    static PropTypes = {\n        gameHighestScore: object,\n        getGameHighestScore: func,\n        newPlayerRegistration: func,\n    };\n\n    static defaultProps = {\n        gameHighestScore: 0,\n        playerData: {},\n    };\n    \n    state = {\n        playerData: {},\n    };\n    */\n\n    constructor() {\n        super();\n\n        this.state = {\n            showRegistration: false,\n        };\n\n        this.playAsAGuest = this.playAsAGuest.bind(this);\n    }\n\n    playAsAGuest(event) {\n        event.preventDefault();\n        const guestPlayer = {\n            highestScore: 0,\n            screenName: 'Guest',\n        };\n        startGame();\n    }\n    componentWillMount() {\n        // This is called with the results from from FB.getLoginStatus().\n        window.fbAsyncInit = () => {\n            FB.init({\n                appId: '113731382506643',\n                cookie: true, // enable cookies to allow the server to access\n                // the session\n                xfbml: true, // parse social plugins on this page\n                version: 'v2.8', // use graph api version 2.8\n            });\n\n            FB.getLoginStatus(response => {\n                if (response.status === 'connected') {\n                    FB.api('/me', response => {\n                        const facebookId = response.id;\n                        store.dispatch(actions.updateFacebookId(facebookId));\n\n                        axios\n                            .get(\n                                'http://localhost:8080/users/facebookId/' +\n                                    facebookId\n                            )\n                            .then(data => {\n                                if (data.data.length === 0) {\n                                    //show registration input box\n                                    this.setState({ showRegistration: true });\n                                } else {\n                                    startGame();\n                                }\n                            })\n                            .catch(e => {\n                                console.log(e);\n                            });\n                    });\n                }\n            });\n        };\n\n        // Load the SDK asynchronously\n        (function(d, s, id) {\n            var js, fjs = d.getElementsByTagName(s)[0];\n            if (d.getElementById(id)) return;\n            js = d.createElement(s);\n            js.id = id;\n            js.src = '//connect.facebook.net/en_US/sdk.js';\n            fjs.parentNode.insertBefore(js, fjs);\n        })(document, 'script', 'facebook-jssdk');\n    }\n\n    render() {\n        return (\n            <div>\n                {this.state.showRegistration ? <Registration /> : null}\n                <input\n                    type=\"submit\"\n                    value=\"play as a Guest\"\n                    onClick={this.playAsAGuest}\n                />\n            </div>\n        );\n    }\n}\n/*\nexport default connect(storeState => ({\n    gameHighestScore: storeState.gameHighestScore,\n    playerData: storeState.playerData,\n}));\n*/\n\n\n\n// WEBPACK FOOTER //\n// src/app.js"],"mappings":";;;;;;;;;;;;;;;;;;;AAEA;AACA;;;AAAA;AACA;AAAA;AACA;;;AAAA;AACA;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AACA;AACA;AADA;AACA;AAAA;AACA;;;AAAA;AACA;;;;;;;;;;;AAbA;AACA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;AAAA;AACA;AACA;;;AACA;;;;;;;;;;;;;;;;AAiBA;AAAA;AACA;AADA;AACA;AAEA;AACA;AADA;AACA;AAGA;AAPA;AAQA;AACA;;;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AASA;;;;;AAEA;;;;;;;;AAlGA;;;;A","sourceRoot":""}